## Overview
***

The rToken system is a programmable interest engine that generates and redirects yields on ERC20 assets using decentralized finance protocols.

The rToken system has four key elements:

   **1. rTokens** - instantiated ERC20 wrappers for underlying ERC20 assets like DAI that are invested in interest generating DeFi protocols and that allow their holders to program where the interest should flow

**2. Hats** – instructions specifying where the underlying ERC20 asset should be invested to earn interest, who should receive that interest and in what proportions. All rTokens must have a hat.

**3. User Buckets** – user-specific tranches of rTokens that are used in the same hat
 
**4. Allocation Strategies (Yield Strategies?)** – sources of interest generated by decentralized finance protocols   
 
Interest flows are programmed through a set of instructions called “hats” that users assign to particular buckets (amounts) of rTokens.  The allocation strategy specifies where the interest will be earned. 

For instance a user with 100 DAI could mint 40 rDAI in bucket 1 that sends interest earned on Compound to Charity A and mint 60 rDAI in bucket 2 that sends interest earned on Aave to Charity B.

Here's an illustrative example:

- Alice holds 200 DAI and sees that an rToken called rDAI exists that allows her to redirect interest earned from Compound (via an Allocation Strategy) to whatever addresses she chooses. 

- She decides to mint 80 rDAI and creates a new hat to send the interest to her friend Bob as a gesture of goodwill.  

- Alice then visits a dapp that allows her to send the interest generated on her DAI from the aave protocol to Charity X, which she supports. She decides to activate her remaining 120 DAI for this purpose.
 
- Now Alice has 200 rDAI, from which she is sending the interest on 80 to Bob in Bucket 1 and the interest on 120 to Charity X in Bucket 2.  

- Alice keeps a claim on her 200 DAI as rDAI and can redeem it in part or in whole whenever she wishes.   

```
            +------+
      +-----+ User +-------+
      |     +------+       |
      |                    |
      |                    |                      +-----------------------+
      |                    |                      |compound.finance cToken|
 +----+-----+  +-----------+-----------+          +-----------------------+
 |  Dapp    |  |ERC20 Compatible Wallet|                     ^
 +----+-----+  +-----------+-----------+                     |
      |                    |                     +--------------------------+
      |                    |                     |CompoundAllocationStrategy|
      |                    |                     +--------------------------+
      |                    |                                 ^
      |                    v                                 |
      |    +----------------------------------+              |
      |    |          RToken                  |              |
      |    |----------------------------------|              |
      |    | - ERC20 compatible               |              |
      +--->| - Mint/Redeem/PayInterest        |              |
           | - "Hat"/"Bucket"                 |              |
           | - Changeable allocation strategy +--------------+
           | - Configurable parameters        | IAllocationStrategy interface
           | - Admin role (human/DAO)         |
           +----------------------------------+
                       ^
                       |
                    +--+--+
                    |Admin|
                    +-----+
```